<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö—Ä–∏–ø—Ç–æ-–í–∞–ª—é—Ç–∏</title>
  <link id="theme-style" rel="stylesheet" href="css.css">
</head>
<body class="dark-theme">
  <header>
<div class="logo">
    <img id="site-logo" src="1.png" alt="–õ–æ–≥–æ—Ç–∏–ø —Å–∞–π—Ç–∞">
</div>
    <nav>
      <ul>
        <li><a href="main.html">–ö—É—Ä—Å–∏ –í–∞–ª—é—Ç</a></li>
        <li><a href="crypto.html">–ö—É—Ä—Å–∏ –ö—Ä–∏–ø—Ç–æ-–í–∞–ª—é—Ç</a></li>
        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
        <li id="theme-toggle" style="cursor: pointer;">–ó–º—ñ–Ω–∞ —Ç–µ–º–∏</li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="currency-selection">
      <div class="currency-left">
        <label>–í–∏–±—Ä–∞–Ω–∞ –í–∞–ª—é—Ç–∞:</label>
        <select id="currency-left">
          <option value="uah">–ì—Ä–∏–≤–Ω—è (UAH)</option>
          <option value="usd">Dollar (USD)</option>
          <option value="bitcoin">Bitcoin (BTC)</option>
          <option value="ethereum">Ethereum (ETH)</option>
          <option value="dogecoin">Dogecoin (DOGE)</option>
          <option value="solana">Solana (SOL)</option>
          <option value="tether">Tether (USDT)</option>
          <option value="binancecoin">BNB</option>
          <option value="ripple">XRP</option>
          <option value="cardano">Cardano (ADA)</option>
        </select>
        <input type="number" id="amount-left" placeholder="–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É">
      </div>

      <button id="switch-currency">üîÑ</button>

      <div class="currency-right">
        <label>–í–∏–±—Ä–∞–Ω–∞ –í–∞–ª—é—Ç–∞:</label>
        <select id="currency-right">
          <option value="uah">–ì—Ä–∏–≤–Ω—è (UAH)</option>
          <option value="usd">Dollar (USD)</option>
          <option value="bitcoin">Bitcoin (BTC)</option>
          <option value="ethereum">Ethereum (ETH)</option>
          <option value="dogecoin">Dogecoin (DOGE)</option>
          <option value="solana">Solana (SOL)</option>
          <option value="tether">Tether (USDT)</option>
          <option value="binancecoin">BNB</option>
          <option value="ripple">XRP</option>
          <option value="cardano">Cardano (ADA)</option>
        </select>
        <input type="number" id="amount-right" placeholder="–†–µ–∑—É–ª—å—Ç–∞—Ç" disabled>
      </div>
    </section>

    <section>
      <h2>–ö—É—Ä—Å–∏ –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç (USD)</h2>
      <table>
        <thead>
          <tr>
            <th>–ù–∞–∑–≤–∞</th>
            <th>–¶—ñ–Ω–∞ ($)</th>
          </tr>
        </thead>
        <tbody id="crypto-table-body">
          <tr><td colspan="2">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <script>
    const cryptoList = [
      "bitcoin", "ethereum", "dogecoin",
      "solana", "tether", "binancecoin",
      "ripple", "cardano"
    ];
    const currencyList = ["uah", "usd"];
    const allList = [...cryptoList, ...currencyList];
    const currencyMap = {};

    async function fetchCryptoPrices() {
      try {
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${cryptoList.join(",")}&vs_currencies=uah,usd`);
        const data = await res.json();
        allList.forEach(coin => {
          if (coin === "uah") currencyMap[coin] = data["tether"].uah / data["tether"].usd;
          else if (coin === "usd") currencyMap[coin] = 1;
          else currencyMap[coin] = data[coin]?.usd || 0;
        });
        updateTable();
        convertAmount();
      } catch (err) {
        document.getElementById("crypto-table-body").innerHTML = "<tr><td colspan='2'>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</td></tr>";
        console.error(err);
      }
    }

    function updateTable() {
      const tbody = document.getElementById("crypto-table-body");
      tbody.innerHTML = "";
      cryptoList.forEach(coin => {
        const price = currencyMap[coin]?.toFixed(2) || "...";
        const name = coin.charAt(0).toUpperCase() + coin.slice(1);
        tbody.innerHTML += `<tr><td>${name}</td><td>${price} $</td></tr>`;
      });
    }

    function convertAmount() {
      const from = document.getElementById("currency-left").value;
      const to = document.getElementById("currency-right").value;
      const amount = parseFloat(document.getElementById("amount-left").value);
      if (!currencyMap[from] || !currencyMap[to] || isNaN(amount)) return;
      const usdValue = from === "usd" ? amount : amount * currencyMap[from];
      const result = to === "usd" ? usdValue : usdValue / currencyMap[to];
      document.getElementById("amount-right").value = result.toFixed(6);
    }

    document.getElementById("currency-left").addEventListener("change", convertAmount);
    document.getElementById("currency-right").addEventListener("change", convertAmount);
    document.getElementById("amount-left").addEventListener("input", convertAmount);

    document.getElementById("switch-currency").addEventListener("click", () => {
      const left = document.getElementById("currency-left");
      const right = document.getElementById("currency-right");
      [left.value, right.value] = [right.value, left.value];
      convertAmount();
    });

    document.getElementById("theme-toggle").addEventListener("click", () => {
      const link = document.getElementById("theme-style");
      link.href = link.href.includes("css.css") ? "arab.css" : "css.css";
    });

    fetchCryptoPrices();
    
   let isThemeChanged = false;

document.getElementById("theme-toggle").addEventListener("click", function() {
    let logo = document.getElementById("site-logo");

    if (!isThemeChanged) {
        logo.src = "2.png"; 
        isThemeChanged = true;
    } else {
        logo.src = "1.png"; 
        isThemeChanged = false;
    }
});


  </script>
</body>
</html>
